{"version":3,"file":"js/product detail.01f58885.js","mappings":"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","sources":["webpack://vue-front-end/./src/pages/NotFoundPage.vue","webpack://vue-front-end/./src/pages/NotFoundPage.vue?4d36","webpack://vue-front-end/./src/pages/ProductDetailPage.vue","webpack://vue-front-end/./src/pages/ProductDetailPage.vue?b3e3"],"sourcesContent":["<template>\r\n    <h1>404: Page Not Found</h1>    \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'NotFoundPage'\r\n}\r\n</script>","import { render } from \"./NotFoundPage.vue?vue&type=template&id=135ef1fd\"\nimport script from \"./NotFoundPage.vue?vue&type=script&lang=js\"\nexport * from \"./NotFoundPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Cursos-Programacion\\\\Curso-Vue\\\\vue-full-stack-ecommerce-site\\\\vue-front-end\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div v-if=\"product\">\r\n        <div class=\"img-wrap\">\r\n            <img :src=\"product.imageUrl\" :alt=\"product.imageUrl\">\r\n        </div>\r\n        <div class=\"product-details\">\r\n            <h1>{{ product.name }}</h1>\r\n            <h3 class=\"price\">{{ product.price }}</h3>\r\n            <button v-if=\"user && !itemIsInCart\" @click=\"addToCart\" class=\"add-to-cart\">Add to cart</button>\r\n            <button v-else-if=\"user && itemIsInCart\" class=\"grey-button\">Item is already in cart</button>\r\n            <button v-else-if=\"!user\" class=\"sign-in\" @click=\"signIn\">Sign in to add to cart</button>\r\n        </div>\r\n    </div>\r\n    <div v-else>\r\n        <NotFoundPage />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { useRoute } from 'vue-router';\r\nimport NotFoundPage from './NotFoundPage.vue';\r\nimport { ref, onBeforeMount, computed, watch } from 'vue';\r\nimport { getAuth, sendSignInLinkToEmail, isSignInWithEmailLink, signInWithEmailLink } from 'firebase/auth'\r\n\r\nexport default {\r\n    name: \"ProductDetailPage\",    \r\n    components: { NotFoundPage },\r\n    props: ['user'],\r\n\r\n    setup(props) {\r\n        const route = useRoute();\r\n        let product = ref([]);\r\n        let cartItems = ref([]);\r\n        const loggedUser = ref(props.user);\r\n\r\n        watch(loggedUser, async (newUserValue) => {\r\n            if (newUserValue) {\r\n                const cartResponse = await axios.get(`/api/users/${newUserValue.uid}/cart`);\r\n                cartItems.value = cartResponse.data;\r\n            }\r\n        });\r\n\r\n        onBeforeMount(async () => {\r\n            const auth = getAuth();\r\n            if (isSignInWithEmailLink(auth, window.location.href)) {\r\n                const email = window.localStorage.getItem('emailForSignIn');\r\n                await signInWithEmailLink(auth, email, window.location.href);\r\n                alert('Successfully signed in!');\r\n                window.localStorage.removeItem('emailForSignIn');\r\n            }\r\n\r\n            const response = await axios.get(`/api/products/${route.params.productId}`);\r\n            product.value = response.data;\r\n\r\n            if (loggedUser.value) {\r\n                const cartResponse = await axios.get(`/api/users/${loggedUser.value.uid}/cart`);\r\n                cartItems.value = cartResponse.data;\r\n            }\r\n\r\n        });\r\n\r\n        const addToCart = async () => {\r\n            try {\r\n                await axios.post(`/api/users/${loggedUser.value.uid}/cart`, { id: route.params.productId });\r\n                alert('Succesfully added item to cart!');\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        };\r\n\r\n        async function signIn() {\r\n            const email = prompt('Please enter your email to sign in: ');\r\n            const auth = getAuth();\r\n            const actionCodeSettings = {\r\n                url: `https://vue-full-stack-ecommerce-service.onrender.com/products/${route.params.productId}`,\r\n                handleCodeInApp: true,\r\n            };\r\n            await sendSignInLinkToEmail(auth, email, actionCodeSettings);\r\n            alert('A login email was sent to the email you provided');\r\n            window.localStorage.setItem('emailForSignIn', email);\r\n        }\r\n\r\n        return {\r\n            loggedUser,\r\n            product,\r\n            itemIsInCart: computed(() => cartItems.value.some((item => item.id === route.params.productId))),\r\n            addToCart,\r\n            signIn,\r\n        };\r\n    },\r\n\r\n}\r\n</script>","import { render } from \"./ProductDetailPage.vue?vue&type=template&id=1c8c32db\"\nimport script from \"./ProductDetailPage.vue?vue&type=script&lang=js\"\nexport * from \"./ProductDetailPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Cursos-Programacion\\\\Curso-Vue\\\\vue-full-stack-ecommerce-site\\\\vue-front-end\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","name","__exports__","render","class","$setup","product","_hoisted_1","_createElementVNode","_hoisted_2","src","imageUrl","alt","_hoisted_4","_toDisplayString","_hoisted_5","price","$props","user","itemIsInCart","onClick","_cache","args","addToCart","_hoisted_6","signIn","_hoisted_7","_createVNode","_component_NotFoundPage","components","NotFoundPage","props","setup","route","useRoute","ref","cartItems","loggedUser","watch","async","newUserValue","cartResponse","axios","uid","value","data","onBeforeMount","auth","getAuth","isSignInWithEmailLink","window","location","href","email","localStorage","getItem","signInWithEmailLink","alert","removeItem","response","params","productId","id","error","console","log","prompt","actionCodeSettings","url","handleCodeInApp","sendSignInLinkToEmail","setItem","computed","some","item"],"sourceRoot":""}