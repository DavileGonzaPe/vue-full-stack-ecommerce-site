"use strict";(self["webpackChunkvue_front_end"]=self["webpackChunkvue_front_end"]||[]).push([[896,723],{4883:function(t,a,e){e.r(a),e.d(a,{default:function(){return c}});var n=e(3396);function o(t,a,e,o,r,i){return(0,n.wg)(),(0,n.iD)("h1",null,"404: Page Not Found")}var r={name:"NotFoundPage"},i=e(89);const s=(0,i.Z)(r,[["render",o]]);var c=s},8403:function(t,a,e){e.r(a),e.d(a,{default:function(){return h}});var n=e(3396),o=e(7139);const r={key:0},i={class:"img-wrap"},s=["src","alt"],c={class:"product-details"},u={class:"price"},d={key:1,class:"grey-button"},l={key:1};function p(t,a,e,p,g,m){const w=(0,n.up)("NotFoundPage");return p.product?((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",i,[(0,n._)("img",{src:p.product.imageUrl,alt:p.product.imageUrl},null,8,s)]),(0,n._)("div",c,[(0,n._)("h1",null,(0,o.zw)(p.product.name),1),(0,n._)("h3",u,(0,o.zw)(p.product.price),1),e.user&&!p.itemIsInCart?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:a[0]||(a[0]=(...t)=>p.addToCart&&p.addToCart(...t)),class:"add-to-cart"},"Add to cart")):e.user&&p.itemIsInCart?((0,n.wg)(),(0,n.iD)("button",d,"Item is already in cart")):e.user?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:2,class:"sign-in",onClick:a[1]||(a[1]=(...t)=>p.signIn&&p.signIn(...t))},"Sign in to add to cart"))])])):((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(w)]))}var g=e(4161),m=e(2483),w=e(4883),v=e(4870),f=e(9125),I={name:"ProductDetailPage",components:{NotFoundPage:w["default"]},props:["user"],setup(t){const a=(0,m.yj)();let e=(0,v.iH)([]),o=(0,v.iH)([]);const r=(0,v.iH)(t.user);(0,n.YP)(r,(async t=>{if(t){const a=await g.Z.get(`/api/users/${t.uid}/cart`);o.value=a.data}})),(0,n.wF)((async()=>{const t=(0,f.v0)();if((0,f.JB)(t,window.location.href)){const a=window.localStorage.getItem("emailForSignIn");await(0,f.P6)(t,a,window.location.href),alert("Successfully signed in!"),window.localStorage.removeItem("emailForSignIn")}const n=await g.Z.get(`/api/products/${a.params.productId}`);if(e.value=n.data,r.value){const t=await g.Z.get(`/api/users/${r.value.uid}/cart`);o.value=t.data}}));const i=async()=>{try{await g.Z.post(`/api/users/${r.value.uid}/cart`,{id:a.params.productId}),alert("Succesfully added item to cart!")}catch(t){console.log(t)}};async function s(){const t=prompt("Please enter your email to sign in: "),e=(0,f.v0)(),n={url:`https://vue-full-stack-ecommerce-service.onrender.com/products/${a.params.productId}`,handleCodeInApp:!0};await(0,f.oo)(e,t,n),alert("A login email was sent to the email you provided"),window.localStorage.setItem("emailForSignIn",t)}return{loggedUser:r,product:e,itemIsInCart:(0,n.Fl)((()=>o.value.some((t=>t.id===a.params.productId)))),addToCart:i,signIn:s}}},y=e(89);const k=(0,y.Z)(I,[["render",p]]);var h=k}}]);
//# sourceMappingURL=product detail.01f58885.js.map